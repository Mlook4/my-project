<!doctype html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <title>Clan Leaderboard</title>

    <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ´ÙÙŠØ± -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Handjet:wght,ELSH@100..900,2&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap");
      :root {
        --background: #f0f0f0;
        --font: #333;
        --table-body: #fff;
        --table-head: #c2c2c2;
      }
      body {
        font-family: Arial;
        background: var(--background);
        color: var(--font);
        text-align: center;
        padding: 30px;
        font-family: "Handjet";
      }
      table {
        margin: auto;
        border-collapse: collapse;
        width: 80%;
        background: var(--table-body);
        user-select: none;
      }
      th,
      td {
        padding: 12px;
        border: 1px solid var(--table-head);
      }
      th {
        background: var(--table-head);
      }
      input {
        padding: 10px;
        font-family: "Handjet";
        font-size: 22px;
        margin: 5px;
        width: 320px;
        outline: none;
      }
      button {
        padding: 10px 20px;
        background: #22c55e;
        color: white;
        outline: none;
        border: none;
        cursor: pointer;
        font-weight: bold;
        font-family: "Handjet";
      }
      button:focus,
      button:hover {
        background: #119140;
      }
      .admin-btn {
        display: inline-block;
        margin: 5px;
        padding: 5px 10px;
        background: var(--table-head);
        cursor: pointer;
      }
      .admin-btn:hover {
        background-color: #acacac;
      }
      .admin-panel {
        display: flex;
        flex-direction: column;
        gap: 5px;
        justify-content: center;
        align-items: center;
      }
    </style>
  </head>

  <body>
    <h1>Clan Leaderboard</h1>

    <button onclick="login()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</button>
    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
    <div id="adminPanel">
      <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨" />
      <input id="score" placeholder="Ø§Ù„Ù†Ù‚Ø§Ø·" type="number" />
      <button onclick="addPlayer()">Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>Ø§Ù„Ù„Ø§Ø¹Ø¨</th>
          <th>Ø§Ù„Ù†Ù‚Ø§Ø·</th>
          <th id="adminCol">ØªØ­ÙƒÙ…</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>

    <script>
      /* =========================
   ğŸ” Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¯Ù…Ù†
========================= */

      // Ù‡Ø§Ø´ Ø±Ù…Ø² **** (MD5)
      const ADMIN_PASSWORD_HASH = "9f5506939986201d55a4353ff8b4028e";

      let isAdmin = false;

      // ØªØ­Ù‚Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ
      if (localStorage.getItem("adminAuth") === ADMIN_PASSWORD_HASH) {
        isAdmin = true;
      }

      function login() {
        const pass = prompt("Ø§Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø£Ø¯Ù…Ù†:");
        if (!pass) return;

        const hash = CryptoJS.MD5(pass).toString();

        if (hash === ADMIN_PASSWORD_HASH) {
          localStorage.setItem("adminAuth", hash);
          isAdmin = true;
          enableAdmin();
          alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„");
        } else {
          alert("Ø±Ù…Ø² Ø®Ø§Ø·Ø¦");
        }
      }

      function logout() {
        localStorage.removeItem("adminAuth");
        isAdmin = false;
        disableAdmin();
        alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬");
      }

      function enableAdmin() {
        document.getElementById("adminPanel").style.display = "block";
        document.getElementById("adminCol").style.display = "table-cell";
        renderTable();
      }

      function disableAdmin() {
        document.getElementById("adminPanel").style.display = "none";
        document.getElementById("adminCol").style.display = "none";
        renderTable();
      }

      /* =========================
   ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
========================= */

      let players = JSON.parse(localStorage.getItem("players")) || [];

      function savePlayers() {
        localStorage.setItem("players", JSON.stringify(players));
      }

      function addPlayer() {
        if (!isAdmin) return;

        const name = document.getElementById("name").value;
        const score = Number(document.getElementById("score").value);

        if (!name) return;

        const existing = players.find((p) => p.name === name);

        if (existing) {
          existing.score = score;
        } else {
          players.push({ name, score });
        }

        savePlayers();
        renderTable();
      }

      function deletePlayer(name) {
        if (!isAdmin) return;

        players = players.filter((p) => p.name !== name);
        savePlayers();
        renderTable();
      }

      /* =========================
   ğŸ–¥ï¸ Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„
========================= */

      function renderTable() {
        const body = document.getElementById("tableBody");
        body.innerHTML = "";

        players
          .sort((a, b) => b.score - a.score)
          .forEach((p) => {
            body.innerHTML += `
        <tr>
          <td>${p.name}</td>
          <td>${p.score}</td>
          <td>
            ${
              isAdmin
                ? `<span class="admin-btn"
                     onclick="deletePlayer('${p.name}')">
                     Ø­Ø°Ù
                   </span>`
                : ""
            }
          </td>
        </tr>
      `;
          });
      }

      /* ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ */

      if (isAdmin) enableAdmin();
      else disableAdmin();

      renderTable();
    </script>
  </body>
</html>

